



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation portal for the web3j Blockchain Library">
      
      
        <link rel="canonical" href="https://web3j.io/transactions/">
      
      
        <meta name="author" content="Web3 Labs">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Transactions - Web3j</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="manifest" href="../manifest.webmanifest">
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-85710619-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#transactions" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://web3j.io/" title="Web3j" class="md-header-nav__button md-logo">
          
            <img src="../img/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Web3j
            </span>
            <span class="md-header-nav__topic">
              
                Transactions
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/web3j/web3j-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    web3j/web3j-docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://web3j.io/" title="Web3j" class="md-nav__button md-logo">
      
        <img src="../img/logo.png" width="48" height="48">
      
    </a>
    Web3j
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/web3j/web3j-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    web3j/web3j-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../quickstart/" title="Quickstart" class="md-nav__link">
      Quickstart
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting_started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../modules/" title="Modules" class="md-nav__link">
      Modules
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Transactions
      </label>
    
    <a href="./" title="Transactions" class="md-nav__link md-nav__link--active">
      Transactions
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#obtaining-ether" class="md-nav__link">
    Obtaining Ether
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethereum-testnets" class="md-nav__link">
    Ethereum testnets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mining-on-testnetprivate-blockchains" class="md-nav__link">
    Mining on testnet/private blockchains
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gas" class="md-nav__link">
    Gas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-mechanisms" class="md-nav__link">
    Transaction mechanisms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-signing-via-an-ethereum-client" class="md-nav__link">
    Transaction signing via an Ethereum client
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#offline-transaction-signing" class="md-nav__link">
    Offline transaction signing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-and-working-with-wallet-files" class="md-nav__link">
    Creating and working with wallet files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signing-transactions" class="md-nav__link">
    Signing transactions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-transaction-nonce" class="md-nav__link">
    The transaction nonce
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-types" class="md-nav__link">
    Transaction types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transfer-of-ether-from-one-party-to-another" class="md-nav__link">
    Transfer of Ether from one party to another
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommended-approach-for-working-with-smart-contracts" class="md-nav__link">
    Recommended approach for working with smart contracts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creation-of-a-smart-contract" class="md-nav__link">
    Creation of a smart contract
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transacting-with-a-smart-contract" class="md-nav__link">
    Transacting with a smart contract
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#querying-the-state-of-a-smart-contract" class="md-nav__link">
    Querying the state of a smart contract
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../smart_contracts/" title="Smart Contracts" class="md-nav__link">
      Smart Contracts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../application_binary_interface/" title="Application Binary Interface" class="md-nav__link">
      Application Binary Interface
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../recursive_length_prefix/" title="Recursive Length Prefix" class="md-nav__link">
      Recursive Length Prefix
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../filters_and_events/" title="Filters and Events" class="md-nav__link">
      Filters and Events
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../command_line_tools/" title="Command Line Tools" class="md-nav__link">
      Command Line Tools
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../management_apis/" title="Management Apis" class="md-nav__link">
      Management Apis
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../using_infura_with_web3j/" title="Using Infura with Web3j" class="md-nav__link">
      Using Infura with Web3j
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ethereum_name_service/" title="Ethereum Name Service" class="md-nav__link">
      Ethereum Name Service
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contracts_supported_by_web3j/" title="Contracts Supported by Web3j" class="md-nav__link">
      Contracts Supported by Web3j
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../projects_using_web3j/" title="Projects using Web3j" class="md-nav__link">
      Projects using Web3j
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../companies_using_web3j/" title="Companies using Web3j" class="md-nav__link">
      Companies using Web3j
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../developer_guide/" title="Developer Guide" class="md-nav__link">
      Developer Guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../links_and_useful_resources/" title="Links and Useful Resources" class="md-nav__link">
      Links and Useful Resources
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../thanks_and_credits/" title="Thanks and Credits" class="md-nav__link">
      Thanks and Credits
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#obtaining-ether" class="md-nav__link">
    Obtaining Ether
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethereum-testnets" class="md-nav__link">
    Ethereum testnets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mining-on-testnetprivate-blockchains" class="md-nav__link">
    Mining on testnet/private blockchains
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gas" class="md-nav__link">
    Gas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-mechanisms" class="md-nav__link">
    Transaction mechanisms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-signing-via-an-ethereum-client" class="md-nav__link">
    Transaction signing via an Ethereum client
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#offline-transaction-signing" class="md-nav__link">
    Offline transaction signing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-and-working-with-wallet-files" class="md-nav__link">
    Creating and working with wallet files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signing-transactions" class="md-nav__link">
    Signing transactions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-transaction-nonce" class="md-nav__link">
    The transaction nonce
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-types" class="md-nav__link">
    Transaction types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transfer-of-ether-from-one-party-to-another" class="md-nav__link">
    Transfer of Ether from one party to another
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommended-approach-for-working-with-smart-contracts" class="md-nav__link">
    Recommended approach for working with smart contracts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creation-of-a-smart-contract" class="md-nav__link">
    Creation of a smart contract
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transacting-with-a-smart-contract" class="md-nav__link">
    Transacting with a smart contract
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#querying-the-state-of-a-smart-contract" class="md-nav__link">
    Querying the state of a smart contract
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/web3j/web3j-docs/edit/master/docs/transactions.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="transactions">Transactions<a class="headerlink" href="#transactions" title="Permanent link">&para;</a></h1>
<p>Broadly speaking there are three types transactions supported on Ethereum:</p>
<ol>
<li><a href="#transfer-of-ether-from-one-party-to-another">Transfer of Ether from one party to another</a></li>
<li><a href="#creation-of-a-smart-contract">Creation of a smart contract</a></li>
<li><a href="#transacting-with-a-smart-contract">Transacting with a smart contract</a></li>
</ol>
<p>To undertake any of these transactions, it is necessary to have Ether (the fuel of the Ethereum blockchain) residing in the Ethereum account which the transactions are taking place from. This is to pay for the <a href="#gas">Gas</a> costs, which is the transaction execution cost for the Ethereum client that performs the transaction on your behalf, comitting the result to the Ethereum blockchain. Instructions for obtaining Ether are described below in <a href="#obtaining-ether">Obtaining Ether</a></p>
<p>Additionally, it is possible to query the state of a smart contract, this is described in <a href="#querying-the-state-of-a-smart-contract">Querying the state of a smart contract</a></p>
<p><img alt="image" src="../img/web3j_transaction.png" /></p>
<h2 id="obtaining-ether">Obtaining Ether<a class="headerlink" href="#obtaining-ether" title="Permanent link">&para;</a></h2>
<p>To obtain Ether you have two options:</p>
<ol>
<li>Mine it yourself</li>
<li>Obtain Ether from another party</li>
</ol>
<p>Mining it yourself in a private environment, or the public test environment (testnet) is very straight forwards. However, in the main live environment (mainnet) it requires significant dedicated GPU time
which is not likely to be feasible unless you already have a gaming PC with multiple dedicated GPUs. If you wish to use a private environment, there is some guidance on the <a href="https://ethereum-homestead.readthedocs.io/en/latest/network/test-networks.html#id3">Homestead
documentation</a>.</p>
<p>To purchase Ether you will need to go via an exchange. As different regions have different exchanges, you will need to research the best location for this yourself. The <a href="https://ethereum-homestead.readthedocs.io/en/latest/ether.html#list-of-centralised-exchange-marketplaces">Homestead documentation</a> contains a number of exchanges which is a good place to start.</p>
<h2 id="ethereum-testnets">Ethereum testnets<a class="headerlink" href="#ethereum-testnets" title="Permanent link">&para;</a></h2>
<p>There are a number of dedicated test networks in Ethereum, which are
supported by various clients.</p>
<ul>
<li>Rinkeby (Geth only)</li>
<li>Kovan (Parity only)</li>
<li>Ropsten (Geth and Parity)</li>
</ul>
<p>For development, its recommended you use the Rinkeby or Kovan test networks. This is because they use a Proof of Authority (PoA) consensus mechanism, ensuring transactions and blocks are created in a consistent and timely manner. The Ropsten testnet, although closest to the Mainnet as it uses Proof of Work (PoW) consensus, has been subject to attacks in the past and tends to be more problematic for developers.</p>
<p>You can request Ether for the Rinkeby testnet via the Rinkeby Crypto Faucet, available at <a href="https://www.rinkeby.io/">https://www.rinkeby.io/</a>.</p>
<p>Details of how to request Ether for the Kovan testnet are available <a href="https://github.com/kovan-testnet/faucet">here</a>.</p>
<p>If you need some Ether on the Ropsten testnet to get started, please post a message with your wallet address to the <a href="https://gitter.im/web3j/web3j">web3j Gitter channel</a> and you will be sent some.</p>
<h2 id="mining-on-testnetprivate-blockchains">Mining on testnet/private blockchains<a class="headerlink" href="#mining-on-testnetprivate-blockchains" title="Permanent link">&para;</a></h2>
<p>In the Ethereum test environment (testnet), the mining difficulty is set lower then the main environment (mainnet). This means that you can mine new Ether with a regular CPU, such as your laptop. What you'll need to do is run an Ethereum client such as Geth or Parity to start building up reserves. Further instructions are available on the respective sites.</p>
<p>Geth</p>
<p><a href="https://github.com/ethereum/go-ethereum/wiki/Mining">https://github.com/ethereum/go-ethereum/wiki/Mining</a></p>
<p>Parity</p>
<p><a href="https://github.com/paritytech/parity/wiki/Mining">https://github.com/paritytech/parity/wiki/Mining</a></p>
<p>Once you have mined some Ether, you can start transacting with the blockchain.</p>
<p>However, as mentioned <a href="#ethereum-testnets">above</a> it's simpler to use the Kovan or Rinkeby test networks.</p>
<h2 id="gas">Gas<a class="headerlink" href="#gas" title="Permanent link">&para;</a></h2>
<p>When a transaction takes place in Ethereum, a transaction cost must be paid to the client that executes the transaction on your behalf, committing the output of this transaction to the Ethereum blockchain.</p>
<p>This cost is measure in gas, where gas is the number of instructions used to execute a transaction in the Ethereum Virtual Machine. Please refer to the <a href="http://ethdocs.org/en/latest/contracts-and-transactions/account-types-gas-and-transactions.html?highlight=gas#what-is-gas">Homestead
documentation</a> for further information.</p>
<p>What this means for you when working with Ethereum clients is that there are two parameters which are used to dictate how much Ether you wish to spend in order for a tranaction to complete:</p>
<p><em>Gas price</em></p>
<blockquote>
<p>This is the amount you are prepared in Ether per unit of gas. web3j
uses a default price of 22,000,000,000 Wei (22 x 10^-8^ Ether). This
is defined in
<a href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/ManagedTransaction.java">ManagedTransaction</a>.</p>
</blockquote>
<p><em>Gas limit</em></p>
<blockquote>
<p>This is the total amount of gas you are happy to spend on the
transaction execution. There is an upper limit of how large a single
transaction can be in an Ethereum block which restricts this value
typically to less then 6,700,000. The current gas limit is visible at
<a href="https://ethstats.net/">https://ethstats.net/</a>.</p>
</blockquote>
<p>These parameters taken together dictate the maximum amount of Ether you are willing to spend on transaction costs. i.e. you can spend no more then gas price * gas limit. The gas price can also affect how quickly a transaction takes place depending on what other transactions are available with a more profitable gas price for miners.</p>
<p>You may need to adjust these parameters to ensure that transactions take place in a timely manner.</p>
<h2 id="transaction-mechanisms">Transaction mechanisms<a class="headerlink" href="#transaction-mechanisms" title="Permanent link">&para;</a></h2>
<p>When you have a valid account created with some Ether, there are two mechanisms you can use to transact with Ethereum.</p>
<ol>
<li><a href="#transaction-signing-via-an-ethereum-client">Transaction signing via an Ethereum client</a></li>
<li><a href="#offline-transaction-signing">Offline transaction signing</a></li>
</ol>
<p>Both mechanisms are supported via web3j.</p>
<h2 id="transaction-signing-via-an-ethereum-client">Transaction signing via an Ethereum client<a class="headerlink" href="#transaction-signing-via-an-ethereum-client" title="Permanent link">&para;</a></h2>
<p>In order to transact via an Ethereum client, you first need to ensure that the client you're transacting with knows about your wallet address. You are best off running your own Ethereum client such as Geth/Parity in order to do this. Once you have a client running, you can
create a wallet via:</p>
<ul>
<li>The <a href="https://github.com/ethereum/go-ethereum/wiki/Managing-your-accounts">GethWiki</a> contains a good run down of the different mechanisms Geth supports such as importing private key files, and creating a new account via it's console</li>
<li>Alternatively you can use a JSON-RPC admin command for your client, such as <em>personal_newAccount</em> for
  <a href="https://github.com/paritytech/parity/wiki/JSONRPC-personal-module#personal_newaccount">Parity</a> or <a href="https://github.com/ethereum/go-ethereum/wiki/Management-APIs#personal_newaccount">Geth</a></li>
</ul>
<p>With your wallet file created, you can unlock your account via web3j by first of all creating an instance of web3j that supports Parity/Geth admin commands:</p>
<div class="codehilite"><pre><span></span><span class="n">Admin</span> <span class="n">web3j</span> <span class="o">=</span> <span class="n">Admin</span><span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="k">new</span> <span class="n">HttpService</span><span class="o">());</span>
</pre></div>


<p>Then you can unlock the account, and providing this was successful, send a transaction:</p>
<div class="codehilite"><pre><span></span><span class="n">PersonalUnlockAccount</span> <span class="n">personalUnlockAccount</span> <span class="o">=</span> <span class="n">web3j</span><span class="o">.</span><span class="na">personalUnlockAccount</span><span class="o">(</span><span class="s">&quot;0x000...&quot;</span><span class="o">,</span> <span class="s">&quot;a password&quot;</span><span class="o">).</span><span class="na">send</span><span class="o">();</span>
<span class="k">if</span> <span class="o">(</span><span class="n">personalUnlockAccount</span><span class="o">.</span><span class="na">accountUnlocked</span><span class="o">())</span> <span class="o">{</span>
    <span class="c1">// send a transaction</span>
<span class="o">}</span>
</pre></div>


<p>Transactions for sending in this manner should be created via <a href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/protocol/core/methods/response/EthSendTransaction.java">EthSendTransaction</a>,
with the <a href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/protocol/core/methods/request/Transaction.java">Transaction</a> type:</p>
<div class="codehilite"><pre><span></span><span class="n">Transaction</span> <span class="n">transaction</span> <span class="o">=</span> <span class="n">Transaction</span><span class="o">.</span><span class="na">createContractTransaction</span><span class="o">(</span>
              <span class="o">&lt;</span><span class="n">from</span> <span class="n">address</span><span class="o">&gt;,</span>
              <span class="o">&lt;</span><span class="n">nonce</span><span class="o">&gt;,</span>
              <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(&lt;</span><span class="n">gas</span> <span class="n">price</span><span class="o">&gt;),</span>  <span class="c1">// we use default gas limit</span>
              <span class="s">&quot;0x...&lt;smart contract code to execute&gt;&quot;</span>
      <span class="o">);</span>

      <span class="n">org</span><span class="o">.</span><span class="na">web3j</span><span class="o">.</span><span class="na">protocol</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">methods</span><span class="o">.</span><span class="na">response</span><span class="o">.</span><span class="na">EthSendTransaction</span>
              <span class="n">transactionResponse</span> <span class="o">=</span> <span class="n">parity</span><span class="o">.</span><span class="na">ethSendTransaction</span><span class="o">(</span><span class="n">ethSendTransaction</span><span class="o">)</span>
              <span class="o">.</span><span class="na">send</span><span class="o">();</span>

      <span class="n">String</span> <span class="n">transactionHash</span> <span class="o">=</span> <span class="n">transactionResponse</span><span class="o">.</span><span class="na">getTransactionHash</span><span class="o">();</span>

      <span class="c1">// poll for transaction response via org.web3j.protocol.Web3j.ethGetTransactionReceipt(&lt;txHash&gt;)</span>
</pre></div>


<p>Where the <em>&lt;nonce></em> value is obtained as per <a href="#the-transaction-nonce">below</a></p>
<p>Please refer to the integration test <a href="https://github.com/web3j/web3j/blob/master/integration-tests/src/test/java/org/web3j/protocol/scenarios/DeployContractIT.java">DeployContractIT</a> and its superclass <a href="https://github.com/web3j/web3j/blob/master/integration-tests/src/test/java/org/web3j/protocol/scenarios/Scenario.java">Scenario</a> for further details of this transaction workflow.</p>
<p>Further details of working with the different admin commands supported by web3j are available in the section
<a href="../management_apis/">Managment APIs</a>.</p>
<h2 id="offline-transaction-signing">Offline transaction signing<a class="headerlink" href="#offline-transaction-signing" title="Permanent link">&para;</a></h2>
<p>If you'd prefer not to manage your own Ethereum client, or do not want to provide wallet details such as your password to an Ethereum client, then offline transaction signing is the way to go.</p>
<p>Offline transaction signing allows you to sign a transaction using your Ethereum Ethereum wallet within web3j, allowing you to have complete control over your private credentials. A transaction created offline can then be sent to any Ethereum client on the network, which will propagate the transaction out to other nodes, provided it is a valid transaction.</p>
<p>You can also perform out of process transaction signing if required. This can be achieved by overriding the <em>sign</em> method in <a href="https://github.com/web3j/web3j/blob/master/crypto/src/main/java/org/web3j/crypto/ECKeyPair.java#L41">ECKeyPair</a>.</p>
<h2 id="creating-and-working-with-wallet-files">Creating and working with wallet files<a class="headerlink" href="#creating-and-working-with-wallet-files" title="Permanent link">&para;</a></h2>
<p>In order to sign transactions offline, you need to have either your Ethereum wallet file or the public and private keys associated with an Ethereum wallet/account.</p>
<p>web3j is able to both generate a new secure Ethereum wallet file for you, or work with an existing wallet file.</p>
<p>To create a new wallet file:</p>
<div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="n">WalletUtils</span><span class="o">.</span><span class="na">generateNewWalletFile</span><span class="o">(</span>
        <span class="s">&quot;your password&quot;</span><span class="o">,</span>
        <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;/path/to/destination&quot;</span><span class="o">));</span>
</pre></div>


<p>To load the credentials from a wallet file:</p>
<div class="codehilite"><pre><span></span><span class="n">Credentials</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">WalletUtils</span><span class="o">.</span><span class="na">loadCredentials</span><span class="o">(</span>
        <span class="s">&quot;your password&quot;</span><span class="o">,</span>
        <span class="s">&quot;/path/to/walletfile&quot;</span><span class="o">);</span>
</pre></div>


<p>These credentials are then used to sign transactions.</p>
<p>Please refer to the <a href="https://github.com/ethereum/wiki/wiki/Web3-Secret-Storage-Definition">Web3 Secret Storage Definition</a> for the full wallet file specification.</p>
<h2 id="signing-transactions">Signing transactions<a class="headerlink" href="#signing-transactions" title="Permanent link">&para;</a></h2>
<p>Transactions to be used in an offline signing capacity, should use the <a href="https://github.com/web3j/web3j/blob/master/crypto/src/main/java/org/web3j/crypto/RawTransaction.java">RawTransaction</a> type for this purpose. The RawTransaction is similar to the previously mentioned Transaction type, however it does not require a <em>from</em> address, as this can be inferred from the signature.</p>
<p>In order to create and sign a raw transaction, the sequence of events is as follows:</p>
<ol>
<li>Identify the next available <a href="#the-transaction-nonce">nonce</a> for the sender account</li>
<li>Create the RawTransaction object</li>
<li>Encode the RawTransaction object using <a href="#">Recursive Length Prefix</a> encoding</li>
<li>Sign the RawTransaction object</li>
<li>Send the RawTransaction object to a node for processing</li>
</ol>
<p>The nonce is an increasing numeric value which is used to uniquely identify transactions. A nonce can only be used once and until a transaction is mined, it is possible to send multiple versions of a transaction with the same nonce, however, once mined, any subsequent submissions will be rejected.</p>
<p>Once you have obtained the next available <a href="#the-transaction-nonce">nonce</a>, the value can then be used to create your transaction object:</p>
<div class="codehilite"><pre><span></span><span class="n">RawTransaction</span> <span class="n">rawTransaction</span>  <span class="o">=</span> <span class="n">RawTransaction</span><span class="o">.</span><span class="na">createEtherTransaction</span><span class="o">(</span>
             <span class="n">nonce</span><span class="o">,</span> <span class="o">&lt;</span><span class="n">gas</span> <span class="n">price</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">gas</span> <span class="n">limit</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">toAddress</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;);</span>
</pre></div>


<p>The transaction can then be signed and encoded:</p>
<div class="codehilite"><pre><span></span><span class="kt">byte</span><span class="o">[]</span> <span class="n">signedMessage</span> <span class="o">=</span> <span class="n">TransactionEncoder</span><span class="o">.</span><span class="na">signMessage</span><span class="o">(</span><span class="n">rawTransaction</span><span class="o">,</span> <span class="o">&lt;</span><span class="n">credentials</span><span class="o">&gt;);</span>
<span class="n">String</span> <span class="n">hexValue</span> <span class="o">=</span> <span class="n">Numeric</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="n">signedMessage</span><span class="o">);</span>
</pre></div>


<p>Where the credentials are those loaded as per <a href="#creating-and-working-with-wallet-files">Creating and working with wallet files</a></p>
<p>The transaction is then sent using <a href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sendrawtransaction">eth_sendRawTransaction</a>:</p>
<div class="codehilite"><pre><span></span><span class="n">EthSendTransaction</span> <span class="n">ethSendTransaction</span> <span class="o">=</span> <span class="n">web3j</span><span class="o">.</span><span class="na">ethSendRawTransaction</span><span class="o">(</span><span class="n">hexValue</span><span class="o">).</span><span class="na">sendAsync</span><span class="o">().</span><span class="na">get</span><span class="o">();</span>
<span class="n">String</span> <span class="n">transactionHash</span> <span class="o">=</span> <span class="n">ethSendTransaction</span><span class="o">.</span><span class="na">getTransactionHash</span><span class="o">();</span>
<span class="c1">// poll for transaction response via org.web3j.protocol.Web3j.ethGetTransactionReceipt(&lt;txHash&gt;)</span>
</pre></div>


<p>Please refer to the integration test <a href="https://github.com/web3j/web3j/blob/master/integration-tests/src/test/java/org/web3j/protocol/scenarios/CreateRawTransactionIT.java">CreateRawTransactionIT</a> for a full example of creating and sending a raw transaction.</p>
<h2 id="the-transaction-nonce">The transaction nonce<a class="headerlink" href="#the-transaction-nonce" title="Permanent link">&para;</a></h2>
<p>The nonce is an increasing numeric value which is used to uniquely identify transactions. A nonce can only be used once and until a transaction is mined, it is possible to send multiple versions of a transaction with the same nonce, however, once mined, any subsequent submissions will be rejected.</p>
<p>You can obtain the next available nonce via the <a href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_gettransactioncount">eth_getTransactionCount</a> method:</p>
<div class="codehilite"><pre><span></span><span class="n">EthGetTransactionCount</span> <span class="n">ethGetTransactionCount</span> <span class="o">=</span> <span class="n">web3j</span><span class="o">.</span><span class="na">ethGetTransactionCount</span><span class="o">(</span>
             <span class="n">address</span><span class="o">,</span> <span class="n">DefaultBlockParameterName</span><span class="o">.</span><span class="na">LATEST</span><span class="o">).</span><span class="na">sendAsync</span><span class="o">().</span><span class="na">get</span><span class="o">();</span>

     <span class="n">BigInteger</span> <span class="n">nonce</span> <span class="o">=</span> <span class="n">ethGetTransactionCount</span><span class="o">.</span><span class="na">getTransactionCount</span><span class="o">();</span>
</pre></div>


<p>The nonce can then be used to create your transaction object:</p>
<div class="codehilite"><pre><span></span><span class="n">RawTransaction</span> <span class="n">rawTransaction</span>  <span class="o">=</span> <span class="n">RawTransaction</span><span class="o">.</span><span class="na">createEtherTransaction</span><span class="o">(</span>
             <span class="n">nonce</span><span class="o">,</span> <span class="o">&lt;</span><span class="n">gas</span> <span class="n">price</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">gas</span> <span class="n">limit</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">toAddress</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;);</span>
</pre></div>


<h2 id="transaction-types">Transaction types<a class="headerlink" href="#transaction-types" title="Permanent link">&para;</a></h2>
<p>The different types of transaction in web3j work with both Transaction and RawTransaction objects. The key difference is that Transaction objects must always have a from address, so that the Ethereum client
which processes the <a href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sendtransaction">eth_sendTransaction</a> request know which wallet to use in order to sign and send the
transaction on the message senders behalf. As mentioned <a href="#offline-transaction-signing">above</a>, this is not necessary for raw transactions which are signed offline.</p>
<p>The subsequent sections outline the key transaction attributes required for the different transaction types. The following attributes remain constant for all:</p>
<ul>
<li>Gas price</li>
<li>Gas limit</li>
<li>Nonce</li>
<li>From</li>
</ul>
<p>Transaction and RawTransaction objects are used interchangeably in all of the subsequent examples.</p>
<h2 id="transfer-of-ether-from-one-party-to-another">Transfer of Ether from one party to another<a class="headerlink" href="#transfer-of-ether-from-one-party-to-another" title="Permanent link">&para;</a></h2>
<p>The sending of Ether between two parties requires a minimal number of details of the transaction object:</p>
<p><em>to</em></p>
<p>the destination wallet address</p>
<p><em>value</em></p>
<p>the amount of Ether you wish to send to the destination address</p>
<div class="codehilite"><pre><span></span><span class="n">BigInteger</span> <span class="n">value</span> <span class="o">=</span> <span class="n">Convert</span><span class="o">.</span><span class="na">toWei</span><span class="o">(</span><span class="s">&quot;1.0&quot;</span><span class="o">,</span> <span class="n">Convert</span><span class="o">.</span><span class="na">Unit</span><span class="o">.</span><span class="na">ETHER</span><span class="o">).</span><span class="na">toBigInteger</span><span class="o">();</span>
<span class="n">RawTransaction</span> <span class="n">rawTransaction</span>  <span class="o">=</span> <span class="n">RawTransaction</span><span class="o">.</span><span class="na">createEtherTransaction</span><span class="o">(</span>
             <span class="o">&lt;</span><span class="n">nonce</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">gas</span> <span class="n">price</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">gas</span> <span class="n">limit</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">toAddress</span><span class="o">&gt;,</span> <span class="n">value</span><span class="o">);</span>
<span class="c1">// send...</span>
</pre></div>


<p>However, it is recommended that you use the <a href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/Transfer.java">Transfer class</a> for sending Ether, which takes care of the nonce management and polling for a response for you:</p>
<div class="codehilite"><pre><span></span><span class="n">Web3j</span> <span class="n">web3</span> <span class="o">=</span> <span class="n">Web3j</span><span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="k">new</span> <span class="n">HttpService</span><span class="o">());</span>  <span class="c1">// defaults to http://localhost:8545/</span>
<span class="n">Credentials</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">WalletUtils</span><span class="o">.</span><span class="na">loadCredentials</span><span class="o">(</span><span class="s">&quot;password&quot;</span><span class="o">,</span> <span class="s">&quot;/path/to/walletfile&quot;</span><span class="o">);</span>
<span class="n">TransactionReceipt</span> <span class="n">transactionReceipt</span> <span class="o">=</span> <span class="n">Transfer</span><span class="o">.</span><span class="na">sendFunds</span><span class="o">(</span>
        <span class="n">web3</span><span class="o">,</span> <span class="n">credentials</span><span class="o">,</span> <span class="s">&quot;0x&lt;address&gt;|&lt;ensName&gt;&quot;</span><span class="o">,</span>
        <span class="n">BigDecimal</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mf">1.0</span><span class="o">),</span> <span class="n">Convert</span><span class="o">.</span><span class="na">Unit</span><span class="o">.</span><span class="na">ETHER</span><span class="o">).</span><span class="na">send</span><span class="o">();</span>
</pre></div>


<h2 id="recommended-approach-for-working-with-smart-contracts">Recommended approach for working with smart contracts<a class="headerlink" href="#recommended-approach-for-working-with-smart-contracts" title="Permanent link">&para;</a></h2>
<p>When working with smart contract wrappers as outlined below, you will have to perform all of the conversions from Solidity to native Java types manually. It is far more effective to use web3j's
<a href="../smart_contracts/#solidity-smart-contract-wrappers">Solidity smart contract wrappers</a> which take care of all code generation and this conversion for you.</p>
<h2 id="creation-of-a-smart-contract">Creation of a smart contract<a class="headerlink" href="#creation-of-a-smart-contract" title="Permanent link">&para;</a></h2>
<p>To deploy a new smart contract, the following attributes will need to be provided</p>
<p><em>value</em></p>
<p>the amount of Ether you wish to deposit in the smart contract
 (assumes zero if not provided)</p>
<p><em>data</em></p>
<p>the hex formatted, compiled smart contract creation code</p>
<div class="codehilite"><pre><span></span><span class="c1">// using a raw transaction</span>
<span class="n">RawTransaction</span> <span class="n">rawTransaction</span> <span class="o">=</span> <span class="n">RawTransaction</span><span class="o">.</span><span class="na">createContractTransaction</span><span class="o">(</span>
        <span class="o">&lt;</span><span class="n">nonce</span><span class="o">&gt;,</span>
        <span class="o">&lt;</span><span class="n">gasPrice</span><span class="o">&gt;,</span>
        <span class="o">&lt;</span><span class="n">gasLimit</span><span class="o">&gt;,</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;,</span>
        <span class="s">&quot;0x &lt;compiled smart contract code&gt;&quot;</span><span class="o">);</span>
<span class="c1">// send...</span>

<span class="c1">// get contract address</span>
<span class="n">EthGetTransactionReceipt</span> <span class="n">transactionReceipt</span> <span class="o">=</span>
             <span class="n">web3j</span><span class="o">.</span><span class="na">ethGetTransactionReceipt</span><span class="o">(</span><span class="n">transactionHash</span><span class="o">).</span><span class="na">send</span><span class="o">();</span>

<span class="k">if</span> <span class="o">(</span><span class="n">transactionReceipt</span><span class="o">.</span><span class="na">getTransactionReceipt</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">contractAddress</span> <span class="o">=</span> <span class="n">transactionReceipt</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getContractAddress</span><span class="o">();</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="c1">// try again</span>
<span class="o">}</span>
</pre></div>


<p>If the smart contract contains a constructor, the associated constructor field values must be encoded and appended to the <em>compiled smart
contract code</em>:</p>
<div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">encodedConstructor</span> <span class="o">=</span>
             <span class="n">FunctionEncoder</span><span class="o">.</span><span class="na">encodeConstructor</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Type</span><span class="o">(</span><span class="n">value</span><span class="o">),</span> <span class="o">...));</span>

<span class="c1">// using a regular transaction</span>
<span class="n">Transaction</span> <span class="n">transaction</span> <span class="o">=</span> <span class="n">Transaction</span><span class="o">.</span><span class="na">createContractTransaction</span><span class="o">(</span>
        <span class="o">&lt;</span><span class="n">fromAddress</span><span class="o">&gt;,</span>
        <span class="o">&lt;</span><span class="n">nonce</span><span class="o">&gt;,</span>
        <span class="o">&lt;</span><span class="n">gasPrice</span><span class="o">&gt;,</span>
        <span class="o">&lt;</span><span class="n">gasLimit</span><span class="o">&gt;,</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;,</span>
        <span class="s">&quot;0x &lt;compiled smart contract code&gt;&quot;</span> <span class="o">+</span> <span class="n">encodedConstructor</span><span class="o">);</span>

<span class="c1">// send...</span>
</pre></div>


<h2 id="transacting-with-a-smart-contract">Transacting with a smart contract<a class="headerlink" href="#transacting-with-a-smart-contract" title="Permanent link">&para;</a></h2>
<p>To transact with an existing smart contract, the following attributes will need to be provided:</p>
<p><em>to</em></p>
<p>the smart contract address</p>
<p><em>value</em></p>
<p>the amount of Ether you wish to deposit in the smart contract (if
 the smart contract accepts ether)</p>
<p><em>data</em></p>
<p>the encoded function selector and parameter arguments</p>
<p>web3j takes care of the function encoding for you, for further details on the implementation refer to the <a href="../application_binary_interface/">Application Binary Interface</a> section.</p>
<div class="codehilite"><pre><span></span><span class="n">Function</span> <span class="n">function</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Function</span><span class="o">&lt;&gt;(</span>
             <span class="s">&quot;functionName&quot;</span><span class="o">,</span>  <span class="c1">// function we&#39;re calling</span>
             <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Type</span><span class="o">(</span><span class="n">value</span><span class="o">),</span> <span class="o">...),</span>  <span class="c1">// Parameters to pass as Solidity Types</span>
             <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">TypeReference</span><span class="o">&lt;</span><span class="n">Type</span><span class="o">&gt;()</span> <span class="o">{},</span> <span class="o">...));</span>

<span class="n">String</span> <span class="n">encodedFunction</span> <span class="o">=</span> <span class="n">FunctionEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">function</span><span class="o">)</span>
<span class="n">Transaction</span> <span class="n">transaction</span> <span class="o">=</span> <span class="n">Transaction</span><span class="o">.</span><span class="na">createFunctionCallTransaction</span><span class="o">(</span>
             <span class="o">&lt;</span><span class="n">from</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">gasPrice</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">gasLimit</span><span class="o">&gt;,</span> <span class="n">contractAddress</span><span class="o">,</span> <span class="o">&lt;</span><span class="n">funds</span><span class="o">&gt;,</span> <span class="n">encodedFunction</span><span class="o">);</span>

<span class="n">org</span><span class="o">.</span><span class="na">web3j</span><span class="o">.</span><span class="na">protocol</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">methods</span><span class="o">.</span><span class="na">response</span><span class="o">.</span><span class="na">EthSendTransaction</span> <span class="n">transactionResponse</span> <span class="o">=</span>
             <span class="n">web3j</span><span class="o">.</span><span class="na">ethSendTransaction</span><span class="o">(</span><span class="n">transaction</span><span class="o">).</span><span class="na">sendAsync</span><span class="o">().</span><span class="na">get</span><span class="o">();</span>

<span class="n">String</span> <span class="n">transactionHash</span> <span class="o">=</span> <span class="n">transactionResponse</span><span class="o">.</span><span class="na">getTransactionHash</span><span class="o">();</span>

<span class="c1">// wait for response using EthGetTransactionReceipt...</span>
</pre></div>


<p>It is not possible to return values from transactional functional calls, regardless of the return type of the message signature. However, it is possible to capture values returned by functions using filters. Please
refer to the <a href="../filters_and_events/">Filters and Events</a> section for details.</p>
<h2 id="querying-the-state-of-a-smart-contract">Querying the state of a smart contract<a class="headerlink" href="#querying-the-state-of-a-smart-contract" title="Permanent link">&para;</a></h2>
<p>This functionality is facilitated by the <a href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_call">eth_call</a> JSON-RPC call.</p>
<p>eth_call allows you to call a method on a smart contract to query a value. There is no transaction cost associated with this function, this is because it does not change the state of any smart contract method's
called, it simply returns the value from them:</p>
<div class="codehilite"><pre><span></span><span class="n">Function</span> <span class="n">function</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Function</span><span class="o">&lt;&gt;(</span>
             <span class="s">&quot;functionName&quot;</span><span class="o">,</span>
             <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Type</span><span class="o">(</span><span class="n">value</span><span class="o">)),</span>  <span class="c1">// Solidity Types in smart contract functions</span>
             <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">TypeReference</span><span class="o">&lt;</span><span class="n">Type</span><span class="o">&gt;()</span> <span class="o">{},</span> <span class="o">...));</span>

<span class="n">String</span> <span class="n">encodedFunction</span> <span class="o">=</span> <span class="n">FunctionEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">function</span><span class="o">)</span>
<span class="n">org</span><span class="o">.</span><span class="na">web3j</span><span class="o">.</span><span class="na">protocol</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">methods</span><span class="o">.</span><span class="na">response</span><span class="o">.</span><span class="na">EthCall</span> <span class="n">response</span> <span class="o">=</span> <span class="n">web3j</span><span class="o">.</span><span class="na">ethCall</span><span class="o">(</span>
             <span class="n">Transaction</span><span class="o">.</span><span class="na">createEthCallTransaction</span><span class="o">(&lt;</span><span class="n">from</span><span class="o">&gt;,</span> <span class="n">contractAddress</span><span class="o">,</span> <span class="n">encodedFunction</span><span class="o">),</span>
             <span class="n">DefaultBlockParameterName</span><span class="o">.</span><span class="na">LATEST</span><span class="o">)</span>
             <span class="o">.</span><span class="na">sendAsync</span><span class="o">().</span><span class="na">get</span><span class="o">();</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Type</span><span class="o">&gt;</span> <span class="n">someTypes</span> <span class="o">=</span> <span class="n">FunctionReturnDecoder</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span>
             <span class="n">response</span><span class="o">.</span><span class="na">getValue</span><span class="o">(),</span> <span class="n">function</span><span class="o">.</span><span class="na">getOutputParameters</span><span class="o">());</span>
</pre></div>


<p><strong>Note:</strong> If an invalid function call is made, or a null result is obtained, the return value will be an instance of
<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#emptyList--">Collections.emptyList()</a></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../modules/" title="Modules" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Modules
              </span>
            </div>
          </a>
        
        
          <a href="../smart_contracts/" title="Smart Contracts" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Smart Contracts
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017-2019 Web3 Labs Ltd
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/web3j" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/web3labs" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/web3labs" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>